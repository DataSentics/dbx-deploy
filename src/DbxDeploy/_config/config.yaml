parameters:
  whl:
    baseDir: 'dbfs:/FileStore/jars'

services:
  DbxDeploy.Logger.StreamLoggerFactory:

  DbxDeploy.Cluster.ClusterRestarter:
    arguments:
      - '%databricks.clusterId%'

  logging.Logger:
    class: logging.Logger
    factory: ['@DbxDeploy.Logger.StreamLoggerFactory', 'create']
    arguments:
      - 'deploy'

  DbxDeploy.Deployer:
    arguments:
      - '%databricks.projectBasePath%'

  DbxDeploy.DeployerJobSubmitter:
    arguments:
      - '%databricks.projectBasePath%'

  DbxDeploy.DeployWithCleanup:
    arguments:
      - '%databricks.projectBasePath%'

  DbxDeploy.Package.PackageMetadataLoader:

  DbxDeploy.Whl.WhlBuilder:

  DbxDeploy.Whl.WhlUploader:

  DbxDeploy.Whl.WhlDeployer:
    arguments:
      - '%databricks.projectBasePath%'
      - '%whl.baseDir%'

  DbxDeploy.Dbc.DbcCreator:

  DbxDeploy.Dbc.DbcUploader:

  DbxDeploy.Dbc.PathsPreparer:

  DbxDeploy.Notebook.NotebooksDeployer:
    arguments:
      - '%databricks.projectRoot%'
      - '%whl.baseDir%'

  DbxNotebookExporter.Json.JsonNotebookExporter:

  DbxNotebookExporter.Databricks.DatabricksNotebookExporter:

  DbxDeploy.Job.JobsDeleter:

  DbxDeploy.Job.JobCreator:
    arguments:
      - '%databricks.clusterId%'
      - '%databricks.projectRoot%'

  DbxDeploy.Job.JobsCreatorAndRunner:

  DbxDeploy.Job.JobSubmitter:
    arguments:
      - '%databricks.clusterId%'
      - '%databricks.projectRoot%'
      - '%browser%'

  DbxDeploy.Job.RunsGetter:
    arguments:
      - '%databricks.clusterId%'
      - '%databricks.projectRoot%'

  DbxDeploy.Job.NotebookKiller:

  databricks_api.databricks.DatabricksAPI:
    autowire: False
    arguments:
      -
        user: '%databricks.user%'
        host: '%databricks.host%'
        token: '%databricks.token%'

  DbxDeploy.Notebook.CurrentDirectoryUpdater:
    arguments:
      - '%databricks.projectRoot%'

  DbxDeploy.Workspace.WorkspaceImporter:

  DbxDeploy.Workspace.WorkspaceExporter:

  DbxDeploy.Notebook.NotebooksLocator:
    arguments:
      - '%databricks.projectBasePath%'

  DbxDeploy.Notebook.LibsRunPreparer:

  DbxDeploy.Notebook.Converter.JupyterConverter:

  DbxDeploy.Notebook.Converter.PythonNotebookConverter:

  DbxDeploy.Notebook.ConverterResolver:
    arguments:
      -
        - '@DbxDeploy.Notebook.Converter.JupyterConverter'
        - '@DbxDeploy.Notebook.Converter.PythonNotebookConverter'
